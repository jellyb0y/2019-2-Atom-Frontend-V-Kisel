(this["webpackJsonp2019-2-Atom-Frontend-V-Kisel"]=this["webpackJsonp2019-2-Atom-Frontend-V-Kisel"]||[]).push([[0],{13:function(e,t,a){e.exports={globalWrap:"Main_globalWrap__1xFvU",wrap:"Main_wrap__3Pr8S",header:"Main_header__3TeaQ",pageName:"Main_pageName__1F0z2",content:"Main_content__3M57R",hoverButton:"Main_hoverButton__z5K4b"}},14:function(e,t,a){e.exports={wrap:"SearchFor_wrap__XVlIW",header:"SearchFor_header__2eQ_H",backButton:"SearchFor_backButton__BOq6H",content:"SearchFor_content__oYFH1",searchLine:"SearchFor_searchLine__2Wd7p"}},17:function(e,t,a){e.exports={block:"City_block__1x_su",name:"City_name__lVQHG",remove:"City_remove__3Aj6y",add:"City_add__1qrdN"}},37:function(e,t,a){e.exports=a(49)},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),o=a(19),i=a(3),l=a(27),s=a(28),u=a(35),m=a(29),h=a(36),_=a(16),p=a(12),d=a(13),f=a.n(d),E=a(8),v=a.n(E),b="https://api.openweathermap.org/data/2.5/group",g="https://api.openweathermap.org/data/2.5/weather",y="http://openweathermap.org/img/wn/",W="cabd487d8ae1c4affc6f6580bf9b0448",w="metric";function N(e){var t,a=e.info,n=a.weather[0].icon;return r.a.createElement("div",{className:v.a.block},r.a.createElement("div",{className:v.a.top},r.a.createElement("div",{className:v.a.city},r.a.createElement("span",{className:v.a.name},a.name),r.a.createElement("span",{className:v.a.location},a.sys.country)),r.a.createElement("div",{className:v.a.temp},r.a.createElement("img",{alt:"".concat(n,".png"),className:v.a.img,src:"".concat(y).concat(n,".png")}),r.a.createElement("span",{className:v.a.text},"".concat(parseInt(a.main.temp)," C")))),r.a.createElement("div",{className:v.a.bottom},"".concat(a.main.humidity,"% | ").concat((t=a.wind.direct,t>=315&&t<=45?"\u0421\u0435\u0432\u0435\u0440\u043d\u044b\u0439":t>=45&&t<=135?"\u0417\u0430\u043f\u0430\u0434\u043d\u044b\u0439":t>=135&&t<=225?"\u042e\u0436\u043d\u044b\u0439":"\u0412\u043e\u0441\u0442\u043e\u0447\u043d\u044b\u0439")," | ").concat(a.wind.speed," m/s")))}var O=a(33),j=a(14),S=a.n(j),D=a(17),x=a.n(D),T="@@weather/UGET_WEATHER_FAILUREPLOAD_CHAT_INFO",B="@@state/SET_IDS",I=function(e){return{type:"@@weather/GET_WEATHER_SUCCESS",payload:e.list}},k=function(e){return{type:"@@weather/ADD_WEATHER_SUCCESS",payload:e}},A=function(){return{type:"@@weather/GET_WEATHER_START"}},C=function(e){return{type:T,payload:e}};function F(){return function(e,t){e(A());var a=t().state.IDs,n="".concat(b,"?id=");a.forEach((function(e,t){t&&(n+=","),n+="".concat(e)})),n="".concat(n,"&units=").concat(w,"&appid=").concat(W),fetch(n,{method:"GET"}).then((function(e){return e.json()})).then((function(t){e(I(t))})).catch((function(t){console.error(t),e(C(t))}))}}var G=function(e){return{type:B,payload:e}};function H(e){return function(t,a){var n=a().state.IDs;-1===n.indexOf(e)&&(n.push(e),t(G(n)),F()(t,a))}}var R={addNewID:H,removeID:function(e){return function(t,a){var n=a().state.IDs;n=n.filter((function(t){return t!==e})),t(G(n)),F()(t,a)}}},M=Object(c.b)((function(e,t){return Object(i.a)({IDs:e.state.IDs},t)}),R)((function(e){var t=e.addNewID,a=e.removeID,n=e.name,c=e.ID,o=e.IDs,i=r.a.createElement("span",{className:x.a.remove,onClick:function(){a(c)}},"x");return-1===o.indexOf(c)&&(i=r.a.createElement("span",{className:x.a.add,onClick:function(){t(c)}},"+")),r.a.createElement("div",{className:x.a.block},r.a.createElement("span",{className:x.a.name},n),i)}));var L={getWeatherByName:function(e){return function(t,a){t(A());var n="".concat(g,"?q=").concat(e,"&appid=").concat(W);fetch(n,{method:"GET"}).then((function(e){return e.json()})).then((function(e){t(k(e))})).catch((function(e){console.error(e),t(C(e))}))}}},P=Object(c.b)((function(e,t){return Object(i.a)({tempWeather:e.weather.tempWeather},t)}),L)((function(e){var t=e.getWeatherByName,a=e.tempWeather,n=r.a.useState(null),c=Object(O.a)(n,2),o=c[0],i=c[1],l=r.a.useRef(null);return r.a.createElement("div",{className:S.a.wrap},r.a.createElement("div",{className:S.a.header},r.a.createElement(_.b,{to:"/"},r.a.createElement("div",{className:S.a.backButton})),r.a.createElement("input",{className:S.a.searchLine,placeholder:"Type a city name...",onChange:function(){o&&clearInterval(o);var e=setTimeout((function(){t(l.current.value)}),500);i(e)},ref:l})),r.a.createElement("div",{className:S.a.content},a.id&&r.a.createElement(M,{ID:a.id,name:a.name})))})),U=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).getWeather_=e.getWeather,a.getWeatherByGPS_=e.getWeatherByGPS,a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getWeather_(),this.getWeatherByGPS_()}},{key:"generateList",value:function(e){return e.map((function(e){return r.a.createElement(N,{key:e.id,info:e})}))}},{key:"render",value:function(){var e,t=this.props.weather;return t&&(e=this.generateList(t)),r.a.createElement(_.a,null,r.a.createElement("div",{className:f.a.globalWrap},r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/search"},r.a.createElement(P,null)),r.a.createElement(p.a,{path:"/"},r.a.createElement("div",{className:f.a.wrap},r.a.createElement("div",{className:f.a.header},r.a.createElement("span",{className:f.a.pageName},"Manage city")),r.a.createElement("div",{className:f.a.content},e)),r.a.createElement(_.b,{to:"/search"},r.a.createElement("div",{className:f.a.hoverButton},"+"))))))}}]),t}(r.a.Component),V={getWeather:F,getWeatherByGPS:function(){return function(e,t){e(A());navigator.geolocation.getCurrentPosition((function(a){var n=a.coords.latitude,r=a.coords.longitude,c="\t\t\t\t\t".concat(g,"\t\t\t\t\t?lat=").concat(n,"\t\t\t\t\t&lon=").concat(r,"\t\t\t\t\t&appid=").concat(W,"\n\t\t\t\t");fetch(c,{method:"GET"}).then((function(e){return e.json()})).then((function(a){H(a.id)(e,t)})).catch((function(t){e(C(t))}))}),console.error,{enableHighAccuracy:!0,maximumAge:3e4,timeout:27e3})}}},q=Object(c.b)((function(e,t){return Object(i.a)({weather:e.weather.list,IDs:e.state.IDs},t)}),V)(U),K=(a(47),a(48),a(10)),Q=a(31),X=a(32),z={loading:!1,error:null,list:[],tempWeather:{}},J=a(34),Y={IDs:[703448,2643743]},Z=Object(K.combineReducers)({state:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return Object(i.a)({},e,{IDs:Object(J.a)(t.payload)});default:return e}},weather:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@@weather/GET_WEATHER_START":return Object(i.a)({},e,{loading:!0});case"@@weather/GET_WEATHER_SUCCESS":return Object(i.a)({},e,{loading:!1,error:null,list:t.payload});case"@@weather/ADD_WEATHER_SUCCESS":return Object(i.a)({},e,{loading:!1,error:null,tempWeather:Object(i.a)({},t.payload)});case T:return Object(i.a)({},e,{loading:!1,error:t.payload});default:return e}}}),$=Object(K.createStore)(Z,Object(Q.composeWithDevTools)({})(Object(K.applyMiddleware)(X.a)));Object(o.render)(r.a.createElement(c.a,{store:$},r.a.createElement(q,null)),document.getElementById("root"))},8:function(e,t,a){e.exports={block:"WheatherBox_block__1598_",top:"WheatherBox_top__t7jM_",city:"WheatherBox_city__1Lgtk",name:"WheatherBox_name__1xDrk",location:"WheatherBox_location__2xyOF",temp:"WheatherBox_temp__12_5O",img:"WheatherBox_img__25_Nw",text:"WheatherBox_text__pjD66",bottom:"WheatherBox_bottom__X4XLd"}}},[[37,1,2]]]);
//# sourceMappingURL=main.d5545802.chunk.js.map